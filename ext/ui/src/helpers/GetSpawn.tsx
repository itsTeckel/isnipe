import Delaunator from 'delaunator';
const FAR_DISTANCE = 60;//If we found a spawn further than this. Exit early
const MIN_DISTANCE = 20;//Exit early if a spawn has a minimum distance

export function GetSpawn(points: Array<number[]>, map: string): [number, any] {
  var spawnPoints = Spawns[map];
  if(spawnPoints == null){
    dispatchVenice([0, null]);
    return [0, null];
  }
  //If points is empty or invalid. Pick a random spawn point.
  if (points == null || points[0] == null || points.length == 0) {
    let keys = Object.keys(spawnPoints);
    let spawnPoint = spawnPoints[keys[Math.floor(Math.random() * keys.length)]];
    let result: [number, any] = [1337, spawnPoint];
    dispatchVenice(result);
    return result;
  }
  let result = CalculateSpawn(points, spawnPoints);
  dispatchVenice(result)
  return result;
}

function dispatchVenice(result: any) {
  if (navigator.userAgent.includes('VeniceUnleashed')) {
    var json = JSON.stringify(result);
    console.log(json);
    WebUI.Call('DispatchEventLocal', 'WebUICalculatedSpawn', json);
  }
}

export function CalculateSpawn(points: Array<number[]>, spawns: any): [number, any] {
  //For each spawn find the farthest point
  var best: [number, any] = [0, null];
  spawns = shuffle(spawns);

  for (let i = 0; i < spawns.length; i++) {
    let spawn = spawns[i];
    let result = spawnDistance(points, spawn);

    //If this result is better than what we found before, take it.
    if(result[0] > best[0]) {
      best = result
    }

    //Exit early if we found a spawnpoint that is far away.
    if(best[0] >= FAR_DISTANCE){
      break;
    }
  }
  return best;
}

function spawnDistance(points: Array<number[]>, spawn: any): [number, any] {
  if(spawn != null && spawn[3] != null && spawn[3][0] != null) {
    let spawnPoint = spawn[3];

    let distance = closestDistance(points, [spawnPoint[0], spawnPoint[1], spawnPoint[2]]);
    return [distance, spawn];
  }
  return [0, null];
}

function closestDistance(points: Array<number[]>, comparePoint: number[]): number {
  var result = -1;
  for (let i = 0; i < points.length; i++) {
    let point = points[i];
    let distance = mathDist(point[0]!, point[1]!, point[2]!, comparePoint[0]!, comparePoint[1]!, comparePoint[2]!);
    if(result == -1 || distance < result) {
      result = distance;
    }
    if(result <= MIN_DISTANCE) {
      return result;
    }
  }
  return result;
}

function mathDist(x1:number,y1:number,z1:number,x2:number,y2:number,z2:number): number{ 
  if(!x2) x2=0; 
  if(!y2) y2=0;
  if(!z2) z2=0;
  return Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1)+(z2-z1)*(z2-z1)); 
}

function test() {
  var a = [4, 3, 0];
  var b = [2, 1, 0];
  var c = [0, 0, 0];
  var d = [1, 3, 0];

  var points = [a, b, c, d];
  var spawns = {
     1: {"interesting": 121},
     2: {"interesting": 13}
  }
  console.log(CalculateSpawn(points, spawns));
  //CalculateSpawn([[4, 3], [2, 1], [0, 0], [1, 3]], {1: 123, 2: 111})
  /*GetSpawn([[1.7299436330795,6.3953123092651, 0],[-9.143627166748,6.3953123092651, 0],[44.114418029785,1.9418169260025, 0],[-19.381170272827,6.3953123092651,0],[43.642139434814,2.2906849384308,0]], "XP2_Palace");
  should output:
0: 17.507361299547927
1: Array(4)
0: (3) [0.74616569280624, 0, 0.66576027870178]
1: (3) [0, 1, 0]
2: (3) [-0.66576027870178, 0, 0.74616569280624]
3: (3) [19.2373046875, 6.3923826217651, 18.822265625]
*/
}

function shuffle(input: any) {
  for (let i = input.length - 1; i >= 0; i--) {
    let randomIndex = Math.floor(Math.random() * (i + 1));
    let itemAtIndex = input[randomIndex];
    input[randomIndex] = input[i];
    input[i] = itemAtIndex;
  }
  return input;
}

var Spawns: any = {
      //Ziba Tower
      "XP2_Skybar": [
        [[0.87985253334045, 0.0, 0.47524675726891], [0.0, 1.0, 0.0], [-0.47524675726891, 0.0, 0.87985253334045], [38.025390625, 10.241094589233, -15.9267578125]],
        [[0.78991669416428, 0.0, -0.61321413516998], [0.0, 1.0, 0.0], [0.61321413516998, 0.0, 0.78991669416428], [-48.6953125, 11.246883392334, -10.76171875]],
        [[-0.83816993236542, 0.0, -0.54540914297104], [0.0, 1.0, 0.0], [0.54540914297104, 0.0, -0.83816993236542], [-48.541954040527, 11.239187240601, 4.4875049591064]],
        [[0.095165222883224, 0.0, 0.99546146392822], [0.0, 1.0, 0.0], [-0.99546146392822, 0.0, 0.095165222883224], [-31.517683029175, 10.879703521729, -3.7763655185699]],
        [[-0.61948239803314, 0.0, -0.78501051664352], [0.0, 1.0, 0.0], [0.78501051664352, 0.0, -0.61948239803314], [-27.065433502197, 11.501758575439, -7.8710980415344]],
        [[-0.17415051162243, 0.0, 0.98471903800964], [0.0, 1.0, 0.0], [-0.98471903800964, 0.0, -0.17415051162243], [-20.4873046875, 10.880663871765, -17.7412109375]],
        [[-0.11069636046886, 0.0, 0.9938542842865], [0.0, 1.0, 0.0], [-0.9938542842865, 0.0, -0.11069636046886], [-12.41796875, 10.879696846008, -31.33984375]],
        [[-0.010918388143182, 0.0, -0.99994039535522], [0.0, 1.0, 0.0], [0.99994039535522, 0.0, -0.010918388143182], [-0.0087890625, 10.879710197449, -9.197265625]],
        [[-0.6379634141922, 0.0, -0.77006667852402], [0.0, 1.0, 0.0], [0.77006667852402, 0.0, -0.6379634141922], [11.037136077881, 10.881640434265, 4.833984375]],
        [[0.81157916784286, 0.0, 0.58424246311188], [0.0, 1.0, 0.0], [-0.58424246311188, 0.0, 0.81157916784286], [28.3232421875, 10.880663871765, -25.6728515625]],
        [[-0.85697388648987, 0.0, 0.51535987854004], [0.0, 1.0, 0.0], [-0.51535987854004, 0.0, -0.85697388648987], [27.208984375, 10.880663871765, -17.0419921875]],
        [[-0.21219703555107, 0.0, 0.97722691297531], [0.0, 1.0, 0.0], [-0.97722691297531, 0.0, -0.21219703555107], [30.6611328125, 15.366015434265, -26.23828125]],
        [[0.4855922460556, 0.0, -0.8741854429245], [0.0, 1.0, 0.0], [0.8741854429245, 0.0, 0.4855922460556], [1.021484375, 15.360156059265, -29.12109375]],
        [[-0.62509846687317, 0.0, -0.78054589033127], [0.0, 1.0, 0.0], [0.78054589033127, 0.0, -0.62509846687317], [1.4619140625, 15.360156059265, -23.353515625]],
        [[-0.17643634974957, 0.0, -0.98431205749512], [0.0, 1.0, 0.0], [0.98431205749512, 0.0, -0.17643634974957], [0.3908716738224, 15.360156059265, -12.30859375]],
        [[0.64443415403366, 0.0, -0.76465982198715], [0.0, 1.0, 0.0], [0.76465982198715, 0.0, 0.64443415403366], [1.8642578125, 15.360156059265, -16.6279296875]],
        [[0.53501039743423, 0.0, 0.84484547376633], [0.0, 1.0, 0.0], [-0.84484547376633, 0.0, 0.53501039743423], [19.353515625, 15.387499809265, -17.072265625]],
        [[0.66533434391022, 0.0, 0.74654549360275], [0.0, 1.0, 0.0], [-0.74654549360275, 0.0, 0.66533434391022], [20.6611328125, 15.360156059265, -31.69140625]],
        [[-0.1281678378582, 0.0, 0.99175250530243], [0.0, 1.0, 0.0], [-0.99175250530243, 0.0, -0.1281678378582], [-23.3349609375, 15.363085746765, -18.0546875]],
        [[-0.22346246242523, 0.0, 0.97471255064011], [0.0, 1.0, 0.0], [-0.97471255064011, 0.0, -0.22346246242523], [-23.033479690552, 15.363085746765, -14.92857837677]],
        [[0.88780897855759, 0.0, 0.46021217107773], [0.0, 1.0, 0.0], [-0.46021217107773, 0.0, 0.88780897855759], [-30.6328125, 15.360156059265, -19.146484375]],
        [[-0.48135474324226, 0.0, -0.87652587890625], [0.0, 1.0, 0.0], [0.87652587890625, 0.0, -0.48135474324226], [-48.5849609375, 15.364062309265, 6.333984375]],
        [[0.98731464147568, 0.0, 0.15877597033978], [0.0, 1.0, 0.0], [-0.15877597033978, 0.0, 0.98731464147568], [-22.7802734375, 15.360156059265, 5.5751953125]],
        //[[-0.99979048967361, 0.0, -0.020467609167099], [0.0, 1.0, 0.0], [0.020467609167099, 0.0, -0.99979048967361], [-20.765625, 15.361132621765, 19.1865234375]]
      ],
    //Noshahr Canals
    "MP_017": [
      [[-0.70174860954285, 0.0, -0.71242469549179], [0.0, 1.0, 0.0], [0.71242469549179, 0.0, -0.70174860954285], [-312.0458984375, 70.536911010742, 323.078125]],
      [[0.62152969837189, 0.0, 0.78339064121246], [0.0, 1.0, 0.0], [-0.78339064121246, 0.0, 0.62152969837189], [-327.2529296875, 70.513534545898, 310.1025390625]],
      [[0.70339822769165, 0.0, -0.7107959985733], [0.0, 1.0, 0.0], [0.7107959985733, 0.0, 0.70339822769165], [-356.7861328125, 67.936325073242, 318.5791015625]],
      [[-0.74390780925751, 0.0, 0.66828221082687], [0.0, 1.0, 0.0], [-0.66828221082687, 0.0, -0.74390780925751], [-362.439453125, 67.945114135742, 312.767578125]],
      [[0.32713311910629, 0.0, -0.9449782371521], [0.0, 1.0, 0.0], [0.9449782371521, 0.0, 0.32713311910629], [-346.7919921875, 71.388473510742, 295.7255859375]],
      [[-0.29239249229431, 0.0, 0.95629841089249], [0.0, 1.0, 0.0], [-0.95629841089249, 0.0, -0.29239249229431], [-336.0263671875, 71.388473510742, 299.375]],
      [[-0.34207788109779, 0.0, -0.93967163562775], [0.0, 1.0, 0.0], [0.93967163562775, 0.0, -0.34207788109779], [-344.6474609375, 70.434371948242, 265.3115234375]],
      [[-0.88363611698151, 0.0, 0.46817430853844], [0.0, 1.0, 0.0], [-0.46817430853844, 0.0, -0.88363611698151], [-331.1875, 70.433418273926, 253.984375]],
      [[0.040696356445551, 0.0, -0.99917155504227], [0.0, 1.0, 0.0], [0.99917155504227, 0.0, 0.040696356445551], [-299.76953125, 70.440231323242, 292.9697265625]],
      [[0.29355686903, 0.0, -0.95594161748886], [0.0, 1.0, 0.0], [0.95594161748886, 0.0, 0.29355686903], [-289.2548828125, 71.374801635742, 280.646484375]],
      [[-0.99980729818344, 0.0, -0.019631166011095], [0.0, 1.0, 0.0], [0.019631166011095, 0.0, -0.99980729818344], [-292.33984375, 66.660934448242, 262.771484375]],
      [[-0.59251260757446, 0.0, -0.80556118488312], [0.0, 1.0, 0.0], [0.80556118488312, 0.0, -0.59251260757446], [-329.630859375, 70.438278198242, 237.5625]],
      [[0.91309833526611, 0.0, -0.40773946046829], [0.0, 1.0, 0.0], [0.40773946046829, 0.0, 0.91309833526611], [-309.2177734375, 70.431442260742, 210.986328125]],
      [[0.58692914247513, 0.0, -0.80963832139969], [0.0, 1.0, 0.0], [0.80963832139969, 0.0, 0.58692914247513], [-328.8818359375, 70.438278198242, 198.5048828125]],
      [[0.74307304620743, 0.0, -0.66921031475067], [0.0, 1.0, 0.0], [0.66921031475067, 0.0, 0.74307304620743], [-353.9228515625, 74.439254760742, 189.8427734375]],
      [[0.69834744930267, 0.0, -0.71575891971588], [0.0, 1.0, 0.0], [0.71575891971588, 0.0, 0.69834744930267], [-358.8486328125, 70.434371948242, 282.0263671875]]
    ],
    //Seine
    "MP_011": [
      [[0.87258917093277, 0.0, 0.48845484852791], [0.0, 1.0, 0.0], [-0.48845484852791, 0.0, 0.87258917093277], [-69.055694580078, 1.2429687976837, 63.549835205078]],
      [[0.4574456512928, 0.0, -0.88923758268356], [0.0, 1.0, 0.0], [0.88923758268356, 0.0, 0.4574456512928], [-99.833984375, 1.2810547351837, 58.1982421875]],
      [[-0.92395204305649, 0.0, -0.38250830769539], [0.0, 1.0, 0.0], [0.38250830769539, 0.0, -0.92395204305649], [-14.564453125, -6.4093751907349, 46.6767578125]],
      [[-0.62932825088501, 0.0, 0.77713960409164], [0.0, 1.0, 0.0], [-0.77713960409164, 0.0, -0.62932825088501], [34.400390625, 1.3484375476837, 70.302734375]],
      [[-0.7307755947113, 0.0, 0.68261778354645], [0.0, 1.0, 0.0], [-0.68261778354645, 0.0, -0.7307755947113], [65.615234375, 1.2800781726837, 61.57421875]],
      [[0.89034533500671, 0.0, -0.45528587698936], [0.0, 1.0, 0.0], [0.45528587698936, 0.0, 0.89034533500671], [67.3076171875, 1.4373368024826, 85.7724609375]],
      [[-0.64422154426575, 0.0, -0.7648389339447], [0.0, 1.0, 0.0], [0.7648389339447, 0.0, -0.64422154426575], [63.9619140625, 3.5203125476837, 119.8427734375]],
      [[0.52052044868469, 0.0, 0.85384917259216], [0.0, 1.0, 0.0], [-0.85384917259216, 0.0, 0.52052044868469], [74.8837890625, 10.403124809265, 137.7177734375]],
      [[0.96356296539307, 0.0, 0.26748168468475], [0.0, 1.0, 0.0], [-0.26748168468475, 0.0, 0.96356296539307], [56.2060546875, 15.381640434265, 147.1962890625]],
      [[0.9482125043869, 0.0, 0.31763672828674], [0.0, 1.0, 0.0], [-0.31763672828674, 0.0, 0.9482125043869], [56.0537109375, 19.200977325439, 147.5]],
      [[0.23395593464375, 0.0, -0.97224718332291], [0.0, 1.0, 0.0], [0.97224718332291, 0.0, 0.23395593464375], [49.35546875, 15.380663871765, 137.814453125]],
      [[0.20052416622639, 0.0, 0.97968876361847], [0.0, 1.0, 0.0], [-0.97968876361847, 0.0, 0.20052416622639], [42.83670425415, 6.478343963623, 129.11039733887]],
      [[0.50875425338745, 0.0, -0.86091178655624], [0.0, 1.0, 0.0], [0.86091178655624, 0.0, 0.50875425338745], [11.904296875, 6.4001951217651, 117.0361328125]],
      [[0.87790411710739, 0.0, 0.47883641719818], [0.0, 1.0, 0.0], [-0.47883641719818, 0.0, 0.87790411710739], [22.1328125, 9.2820310592651, 140.396484375]],
      [[0.60144609212875, 0.0, 0.79891341924667], [0.0, 1.0, 0.0], [-0.79891341924667, 0.0, 0.60144609212875], [16.419921875, 13.140429496765, 131.8388671875]],
      [[-0.92916226387024, 0.0, 0.36967206001282], [0.0, 1.0, 0.0], [-0.36967206001282, 0.0, -0.92916226387024], [21.9853515625, 16.970508575439, 148.138671875]],
      [[-0.70263749361038, 0.0, 0.71154797077179], [0.0, 1.0, 0.0], [-0.71154797077179, 0.0, -0.70263749361038], [-1.4638671875, 8.6414060592651, 182.2666015625]],
      [[-0.81352573633194, 0.0, -0.58152890205383], [0.0, 1.0, 0.0], [0.58152890205383, 0.0, -0.81352573633194], [-25.541015625, 9.9226560592651, 175.0458984375]],
      [[0.85704052448273, 0.0, -0.5152490735054], [0.0, 1.0, 0.0], [0.5152490735054, 0.0, 0.85704052448273], [-25.96875, 13.777300834656, 167.091796875]],
      [[-0.84256792068481, 0.0, 0.53859013319016], [0.0, 1.0, 0.0], [-0.53859013319016, 0.0, -0.84256792068481], [-40.128929138184, 1.2280070781708, 121.07224273682]],
      [[-0.90100461244583, 0.0, 0.43380948901176], [0.0, 1.0, 0.0], [-0.43380948901176, 0.0, -0.90100461244583], [-59.3876953125, 1.4363766908646, 121.814453125]],
      [[-0.28482136130333, 0.0, 0.95858061313629], [0.0, 1.0, 0.0], [-0.95858061313629, 0.0, -0.28482136130333], [-71.3740234375, 1.2429687976837, 94.7705078125]]
    ],
    //Donya Fortress
    "XP2_Palace": [
      [[-0.68803387880325, 0.0, -0.72567856311798], [0.0, 1.0, 0.0], [0.72567856311798, 0.0, -0.68803387880325], [-4.7138671875, 6.4001951217651, 24.580408096313]],
      [[0.74616569280624, 0.0, 0.66576027870178], [0.0, 1.0, 0.0], [-0.66576027870178, 0.0, 0.74616569280624], [19.2373046875, 6.3923826217651, 18.822265625]],
      [[-0.45880001783371, 0.0, 0.8885395526886], [0.0, 1.0, 0.0], [-0.8885395526886, 0.0, -0.45880001783371], [54.7265625, 6.7234702110291, 10.396484375]],
      [[0.54088431596756, 0.0, 0.84109699726105], [0.0, 1.0, 0.0], [-0.84109699726105, 0.0, 0.54088431596756], [54.9541015625, 1.2839844226837, -7.46875]],
      [[-0.7183825969696, 0.0, 0.69564819335938], [0.0, 1.0, 0.0], [-0.69564819335938, 0.0, -0.7183825969696], [37.5302734375, -1.2706786394119, -25.993244171143]],
      [[-0.82050997018814, 0.0, 0.57163220643997], [0.0, 1.0, 0.0], [-0.57163220643997, 0.0, -0.82050997018814], [29.26953125, 1.3337891101837, 47.42578125]],
      [[0.48163351416588, 0.0, -0.87637275457382], [0.0, 1.0, 0.0], [0.87637275457382, 0.0, 0.48163351416588], [5.525390625, 1.3464844226837, 35.1845703125]],
      [[0.19800035655499, 0.0, -0.98020195960999], [0.0, 1.0, 0.0], [0.98020195960999, 0.0, 0.19800035655499], [-30.6064453125, 6.4207029342651, 14.4873046875]],
      [[0.31970396637917, 0.0, -0.94751745462418], [0.0, 1.0, 0.0], [0.94751745462418, 0.0, 0.31970396637917], [-29.9580078125, 6.4001951217651, -17.8857421875]],
      [[0.69488847255707, 0.0, -0.71911752223969], [0.0, 1.0, 0.0], [0.71911752223969, 0.0, 0.69488847255707], [-17.296875, 6.4041013717651, -24.4619140625]],
      [[-0.87283176183701, 0.0, -0.48802125453949], [0.0, 1.0, 0.0], [0.48802125453949, 0.0, -0.87283176183701], [15.444375991821, -3.5821962356567, 3.0019254684448]],
      [[-0.90669631958008, 0.0, 0.4217840731144], [0.0, 1.0, 0.0], [-0.4217840731144, 0.0, -0.90669631958008], [-6.7930502891541, -4.4806437492371, 10.2509765625]],
      [[0.30352059006691, 0.0, -0.95282489061356], [0.0, 1.0, 0.0], [0.95282489061356, 0.0, 0.30352059006691], [17.0263671875, 1.7439453601837, 62.0751953125]],
      [[-0.1920130699873, 0.0, -0.98139238357544], [0.0, 1.0, 0.0], [0.98139238357544, 0.0, -0.1920130699873], [-22.744140625, 1.4148437976837, -30.15625]],
      [[-0.11829125881195, 0.0, -0.99297893047333], [0.0, 1.0, 0.0], [0.99297893047333, 0.0, -0.11829125881195], [-19.35546875, 1.2810547351837, -20.6376953125]],
      [[0.37490803003311, 0.0, 0.92706203460693], [0.0, 1.0, 0.0], [-0.92706203460693, 0.0, 0.37490803003311], [37.0146484375, 6.7205076217651, -32.4775390625]]
    ],
    //Talah Market
    "XP4_Rubble":
    [
      [[0.69207292795181, -6.9468558683283e-10, 0.72182762622833], [0.16171869635582, 0.9745796918869, -0.15505239367485], [-0.70347857475281, 0.2240404933691, 0.67448031902313], [-68.47412109375, 97.917854309082, 109.83451843262]]
    ],
    //Teheran Highway
    "MP_003": [
      [[0.85053223371506, -4.4413550615019e-10, -0.52592289447784], [-0.12746897339821, 0.9701834321022, -0.20614519715309], [0.51024168729782, 0.24237199127674, 0.82517230510712], [-314.90002441406, 253.83419799805, -235.89474487305]],
      [[0.68323057889938, 0.0, -0.73020273447037], [0.0, 1.0, 0.0], [0.73020273447037, 0.0, 0.68323057889938], [-285.08587646484, 248.97050476074, -353.95989990234]],
      [[0.18430556356907, 0.0, 0.98286896944046], [0.0, 1.0, 0.0], [-0.98286896944046, 0.0, 0.18430556356907], [-288.4384765625, 248.89530944824, -390.13775634766]],
      [[0.87499487400055, 0.0, 0.48413223028183], [0.0, 1.0, 0.0], [-0.48413223028183, 0.0, 0.87499487400055], [-310.265625, 248.33280944824, -441.22265625]],
      [[-0.041463807225227, 0.0, 0.99914002418518], [0.0, 1.0, 0.0], [-0.99914002418518, 0.0, -0.041463807225227], [-348.74609375, 251.98710632324, -414.4560546875]],
      [[0.90847051143646, 0.0, -0.41794899106026], [0.0, 1.0, 0.0], [0.41794899106026, 0.0, 0.90847051143646], [-375.0634765625, 257.51159667969, -413.6806640625]],
      [[0.67810875177383, 0.0, -0.73496156930923], [0.0, 1.0, 0.0], [0.73496156930923, 0.0, 0.67810875177383], [-404.3583984375, 257.38751220703, -408.267578125]],
      [[-0.4463204741478, 0.0, -0.89487320184708], [0.0, 1.0, 0.0], [0.89487320184708, 0.0, -0.4463204741478], [-379.26171875, 257.77032470703, -386.6376953125]],
      [[0.3503942489624, 0.0, 0.93660229444504], [0.0, 1.0, 0.0], [-0.93660229444504, 0.0, 0.3503942489624], [-368.314453125, 257.36407470703, -365.546875]],
      [[0.99826318025589, 0.0, -0.058911826461554], [0.0, 1.0, 0.0], [0.058911826461554, 0.0, 0.99826318025589], [-382.3720703125, 259.28015136719, -328.7578125]],
      [[-0.25817501544952, 0.0, -0.96609818935394], [0.0, 1.0, 0.0], [0.96609818935394, 0.0, -0.25817501544952], [-378.39834594727, 257.87481689453, -266.185546875]],
      [[0.013259034603834, 0.0, -0.99991208314896], [0.0, 1.0, 0.0], [0.99991208314896, 0.0, 0.013259034603834], [-368.4013671875, 252.14337158203, -240.740234375]],
      [[-0.98328906297684, 0.0, 0.18205109238625], [0.0, 1.0, 0.0], [-0.18205109238625, 0.0, -0.98328906297684], [-322.25390625, 252.23808288574, -248.224609375]],
      [[0.99995332956314, 0.0, 0.0096589149907231], [0.0, 1.0, 0.0], [-0.0096589149907231, 0.0, 0.99995332956314], [-367.259765625, 252.58380126953, -335.30563354492]],
      [[-0.77806288003922, 0.0, 0.62818640470505], [0.0, 1.0, 0.0], [-0.62818640470505, 0.0, -0.77806288003922], [-296.4287109375, 256.97348022461, -285.5126953125]],
      [[0.54506212472916, 0.0, -0.83839565515518], [0.0, 1.0, 0.0], [0.83839565515518, 0.0, 0.54506212472916], [-304.37109375, 252.55549621582, -296.26062011719]],
      [[-0.91392797231674, 0.0, -0.40587642788887], [0.0, 1.0, 0.0], [0.40587642788887, 0.0, -0.91392797231674], [-283.8251953125, 248.89530944824, -370.7734375]],
      [[-0.96491074562073, 0.0, 0.26257809996605], [0.0, 1.0, 0.0], [-0.26257809996605, 0.0, -0.96491074562073], [-271.5810546875, 248.90409851074, -344.48828125]],
      [[-0.50576609373093, 0.0, 0.86267066001892], [0.0, 1.0, 0.0], [-0.86267066001892, 0.0, -0.50576609373093], [-263.099609375, 261.89044189453, -311.6865234375]],
      [[-0.98040962219238, 0.0, 0.19696953892708], [0.0, 1.0, 0.0], [-0.19696953892708, 0.0, -0.98040962219238], [-293.48046875, 248.89530944824, -292.427734375]],
      [[-0.84374135732651, 0.0, 0.536749958992], [0.0, 1.0, 0.0], [-0.536749958992, 0.0, -0.84374135732651], [-346.302734375, 256.21466064453, -206.78125]],
      [[0.047503933310509, -4.4413550615019e-10, 0.99887108802795], [0.11695571243763, 0.99312156438828, -0.0055621350184083], [-0.99200040102005, 0.117087893188, 0.04717718064785], [-403.24713134766, 258.73068237305, -278.18139648438]],
      [[0.048671785742044, -4.4413550615019e-10, 0.99881488084793], [0.11694853752851, 0.99312162399292, -0.0056988475844264], [-0.99194467067719, 0.11708729714155, 0.048337005078793], [-403.24713134766, 258.73068237305, -278.18148803711]],
      [[-0.060347095131874, 0.0, -0.9981774687767], [0.0, 1.0, 0.0], [0.9981774687767, 0.0, -0.060347095131874], [-403.32421875, 257.12969970703, -278.177734375]],
      [[0.0051021473482251, 0.0, -0.99998700618744], [0.0, 1.0, 0.0], [0.99998700618744, 0.0, 0.0051021473482251], [-424.533203125, 257.12969970703, -321.1552734375]]
    ],
    //Bandar Desert
    "XP3_Desert":
    [
      [[0.76015490293503, 0.0, 0.64974188804626], [0.0, 1.0, 0.0], [-0.64974188804626, 0.0, 0.76015490293503], [420.7724609375, 69.970504760742, -379.11123657227]],
      [[-0.78195351362228, 0.0, 0.62333673238754], [0.0, 1.0, 0.0], [-0.62333673238754, 0.0, -0.78195351362228], [368.537109375, 66.813301086426, -374.515625]],
      [[0.69791150093079, 0.0, -0.71618402004242], [0.0, 1.0, 0.0], [0.71618402004242, 0.0, 0.69791150093079], [374.625, 66.654098510742, -366.830078125]],
      [[0.69501495361328, 0.0, -0.71899527311325], [0.0, 1.0, 0.0], [0.71899527311325, 0.0, 0.69501495361328], [406.900390625, 66.578918457031, -327.3291015625]],
      [[-0.4035904109478, 0.0, -0.9149397611618], [0.0, 1.0, 0.0], [0.9149397611618, 0.0, -0.4035904109478], [539.4208984375, 77.611129760742, -324.345703125]],
      [[-0.97114616632462, 0.0, 0.238484993577], [0.0, 1.0, 0.0], [-0.238484993577, 0.0, -0.97114616632462], [575.3369140625, 78.876754760742, -417.943359375]],
      [[0.5139132142067, 0.0, 0.85784220695496], [0.0, 1.0, 0.0], [-0.85784220695496, 0.0, 0.5139132142067], [579.50378417969, 78.878707885742, -428.5283203125]],
      [[-0.93166053295135, 0.0, 0.36333000659943], [0.0, 1.0, 0.0], [-0.36333000659943, 0.0, -0.93166053295135], [642.345703125, 74.301559448242, -516.4287109375]],
      [[-0.39383399486542, 0.0, -0.91918158531189], [0.0, 1.0, 0.0], [0.91918158531189, 0.0, -0.39383399486542], [476.7353515625, 75.814254760742, -560.6337890625]],
      [[0.086138494312763, 0.0, 0.9962831735611], [0.0, 1.0, 0.0], [-0.9962831735611, 0.0, 0.086138494312763], [526.720703125, 73.866989135742, -456.673828125]],
      [[-0.99955070018768, 0.0, 0.029972983524203], [0.0, 1.0, 0.0], [-0.029972983524203, 0.0, -0.99955070018768], [526.435546875, 81.465621948242, -442.5126953125]],
      [[0.17368297278881, 0.0, 0.98480159044266], [0.0, 1.0, 0.0], [-0.98480159044266, 0.0, 0.17368297278881], [517.9423828125, 73.876754760742, -448.103515625]],
      [[0.32886019349098, 0.0, -0.94437861442566], [0.0, 1.0, 0.0], [0.94437861442566, 0.0, 0.32886019349098], [513.8076171875, 73.658996582031, -432.97064208984]],
      [[0.1712631136179, 0.0, 0.98522531986237], [0.0, 1.0, 0.0], [-0.98522531986237, 0.0, 0.1712631136179], [485.3017578125, 73.946090698242, -419.990234375]],
      [[0.18670330941677, 0.0, 0.98241633176804], [0.0, 1.0, 0.0], [-0.98241633176804, 0.0, 0.18670330941677], [486.0673828125, 81.543746948242, -420.0556640625]],
      [[0.99762147665024, 0.0, 0.068929970264435], [0.0, 1.0, 0.0], [-0.068929970264435, 0.0, 0.99762147665024], [466.5439453125, 73.649215698242, -455.7236328125]],
      [[0.70777398347855, 0.0, -0.70643895864487], [0.0, 1.0, 0.0], [0.70643895864487, 0.0, 0.70777398347855], [443.474609375, 73.642379760742, -419.041015625]],
      [[-0.41545113921165, 0.0, 0.9096155166626], [0.0, 1.0, 0.0], [-0.9096155166626, 0.0, -0.41545113921165], [474.6650390625, 73.673629760742, -391.185546875]]
    ],
    //Alborz Mountains
    "XP3_Alborz":
    [
      [[-0.38307544589043, 0.0, 0.92371708154678], [0.0, 1.0, 0.0], [-0.92371708154678, 0.0, -0.38307544589043], [48.56640625, 584.25573730469, 3.0185565948486]],
      [[0.58975321054459, 0.0, 0.8075835108757], [0.0, 1.0, 0.0], [-0.8075835108757, 0.0, 0.58975321054459], [114.1591796875, 587.41192626953, -61.456016540527]],
      [[-0.11234451830387, 0.0, -0.99366933107376], [0.0, 1.0, 0.0], [0.99366933107376, 0.0, -0.11234451830387], [111.58106994629, 595.00665283203, -11.447261810303]],
      [[0.99908274412155, 0.0, 0.042821548879147], [0.0, 1.0, 0.0], [-0.042821548879147, 0.0, 0.99908274412155], [110.23046875, 608.76348876953, -17.7998046875]],
      [[-0.98259496688843, 0.0, -0.185761064291], [0.0, 1.0, 0.0], [0.185761064291, 0.0, -0.98259496688843], [140.12390136719, 588.23614501953, 16.577119827271]],
      [[0.54379022121429, 0.0, -0.83922117948532], [0.0, 1.0, 0.0], [0.83922117948532, 0.0, 0.54379022121429], [208.12983703613, 576.83575439453, -39.916019439697]],
      [[-0.72310394048691, 0.0, -0.69073921442032], [0.0, 1.0, 0.0], [0.69073921442032, 0.0, -0.72310394048691], [258.15338134766, 544.22540283203, -104.17384338379]],
      // [[-0.71165537834167, 0.0, 0.70252877473831], [0.0, 1.0, 0.0], [-0.70252877473831, 0.0, -0.71165537834167], [39.005878448486, 583.89544677734, -138.0888671875]],
      [[0.9378981590271, 0.0, 0.34691074490547], [0.0, 1.0, 0.0], [-0.34691074490547, 0.0, 0.9378981590271], [36.570285797119, 575.95794677734, -121.01459503174]],
      [[-0.26184326410294, 0.0, 0.96511042118073], [0.0, 1.0, 0.0], [-0.96511042118073, 0.0, -0.26184326410294], [44.688385009766, 578.36700439453, -79.325416564941]],
      [[-0.9999977350235, 0.0, -0.0021341706160456], [0.0, 1.0, 0.0], [0.0021341706160456, 0.0, -0.9999977350235], [140.04002380371, 587.29681396484, 21.000032424927]],
      [[-0.9196549654007, 0.0, 0.39272737503052], [0.0, 1.0, 0.0], [-0.39272737503052, 0.0, -0.9196549654007], [48.4150390625, 584.11700439453, 4.4365234375]],
      [[-0.099902577698231, 0.0, -0.99499720335007], [0.0, 1.0, 0.0], [0.99499720335007, 0.0, -0.099902577698231], [30.356433868408, 585.30450439453, 6.8702163696289]]
    ],
    //Scrapmetal
    "XP2_Factory":
    [
      [[-0.35235807299614, 0.0, 0.93586528301239], [0.0, 1.0, 0.0], [-0.93586528301239, 0.0, -0.35235807299614], [25.853332519531, 16.484180450439, 26.082887649536]],
      [[-0.99669516086578, 0.0, -0.08123267441988], [0.0, 1.0, 0.0], [0.08123267441988, 0.0, -0.99669516086578], [24.084980010986, 19.206836700439, 43.123023986816]],
      [[0.99838465452194, 0.0, -0.056815832853317], [0.0, 1.0, 0.0], [0.056815832853317, 0.0, 0.99838465452194], [24.084054946899, 19.206836700439, 38.791156768799]],
      [[-0.20698347687721, 0.0, 0.97834444046021], [0.0, 1.0, 0.0], [-0.97834444046021, 0.0, -0.20698347687721], [-18.6953125, 8.3249998092651, 32.0927734375]],
      [[0.20698417723179, -4.4413550615019e-10, -0.97834432125092], [-0.17634001374245, 0.9836220741272, -0.037307515740395], [0.96232104301453, 0.18024331331253, 0.20359420776367], [-18.770816802979, 9.9259958267212, 32.076801300049]],
      [[-0.013466892763972, 0.0, -0.9999093413353], [0.0, 1.0, 0.0], [0.9999093413353, 0.0, -0.013466892763972], [-17.8291015625, 8.3249998092651, 31.9375]],
      [[-0.097502037882805, 0.0, -0.99523532390594], [0.0, 1.0, 0.0], [0.99523532390594, 0.0, -0.097502037882805], [19.890625, 8.3249998092651, 40.2998046875]],
      [[-0.41852298378944, 0.0, 0.90820622444153], [0.0, 1.0, 0.0], [-0.90820622444153, 0.0, -0.41852298378944], [17.982421875, 8.3249998092651, 40.904296875]],
      [[0.70627307891846, 0.0, 0.70793950557709], [0.0, 1.0, 0.0], [-0.70793950557709, 0.0, 0.70627307891846], [25.849573135376, 19.204883575439, 3.2745430469513]],
      [[0.99780184030533, 0.0, 0.066268004477024], [0.0, 1.0, 0.0], [-0.066268004477024, 0.0, 0.99780184030533], [-20.9951171875, 24.960742950439, -20.085708618164]],
      [[0.14452008903027, 0.0, 0.98950189352036], [0.0, 1.0, 0.0], [-0.98950189352036, 0.0, 0.14452008903027], [-15.103578567505, 21.671680450439, -20.841796875]],
      [[-0.8697172999382, 0.0, 0.49355021119118], [0.0, 1.0, 0.0], [-0.49355021119118, 0.0, -0.8697172999382], [-8.7647333145142, 18.880664825439, -27.131837844849]],
      [[-0.40454566478729, 0.0, -0.91451781988144], [0.0, 1.0, 0.0], [0.91451781988144, 0.0, -0.40454566478729], [13.224608421326, 18.419729232788, -35.361347198486]],
      [[-0.2062129676342, 0.0, 0.97850716114044], [0.0, 1.0, 0.0], [-0.97850716114044, 0.0, -0.2062129676342], [1.2216796875, 18.294727325439, -35.9794921875]],
      [[-0.81276655197144, 0.0, -0.58258950710297], [0.0, 1.0, 0.0], [0.58258950710297, 0.0, -0.81276655197144], [10.53515625, 12.800585746765, -36.609375]],
      [[-0.69172632694244, 0.0, 0.72215974330902], [0.0, 1.0, 0.0], [-0.72215974330902, 0.0, -0.69172632694244], [5.1533203125, 12.800585746765, -36.8515625]],
      [[0.31285345554352, 0.0, -0.94980138540268], [0.0, 1.0, 0.0], [0.94980138540268, 0.0, 0.31285345554352], [-1.8310546875, 12.800585746765, -44.2724609375]],
      [[-0.62023901939392, 0.0, -0.78441292047501], [0.0, 1.0, 0.0], [0.78441292047501, 0.0, -0.62023901939392], [6.708984375, 10.161933898926, -13.75]],
      [[-0.75683468580246, 0.0, -0.65360635519028], [0.0, 1.0, 0.0], [0.65360635519028, 0.0, -0.75683468580246], [-27.427740097046, 8.3249998092651, 11.18846988678]]
    ],
    "XP2_Office":
    [
      [[0.72509217262268, 0.0, -0.68865185976028], [0.0, 1.0, 0.0], [0.68865185976028, 0.0, 0.72509217262268], [18.3349609375, 6.8249998092651, -68.298828125]],
      [[-0.75412577390671, 0.0, 0.65673005580902], [0.0, 1.0, 0.0], [-0.65673005580902, 0.0, -0.75412577390671], [40.734375, 6.4080076217651, -41.6787109375]],
      [[-0.98286634683609, 0.0, -0.18431963026524], [0.0, 1.0, 0.0], [0.18431963026524, 0.0, -0.98286634683609], [45.19921875, 6.1374998092651, -28.326171875]],
      [[0.22963604331017, 0.0, 0.97327655553818], [0.0, 1.0, 0.0], [-0.97327655553818, 0.0, 0.22963604331017], [39.5029296875, 1.2732422351837, -5.9111328125]],
      [[-0.78567290306091, 0.0, -0.61864215135574], [0.0, 1.0, 0.0], [0.61864215135574, 0.0, -0.78567290306091], [25.6337890625, 1.2732422351837, -8.0185546875]],
      [[-0.4375307559967, 0.0, -0.89920341968536], [0.0, 1.0, 0.0], [0.89920341968536, 0.0, -0.4375307559967], [11.1337890625, 1.2800781726837, -7.8310546875]],
      [[0.92703568935394, 0.0, -0.37497311830521], [0.0, 1.0, 0.0], [0.37497311830521, 0.0, 0.92703568935394], [17.7392578125, 1.3660205602646, -50.9970703125]],
      [[0.056996446102858, 0.0, -0.99837440252304], [0.0, 1.0, 0.0], [0.99837440252304, 0.0, 0.056996446102858], [-59.6279296875, 1.2800781726837, -45.380859375]],
      [[0.97216820716858, 0.0, 0.23428392410278], [0.0, 1.0, 0.0], [-0.23428392410278, 0.0, 0.97216820716858], [-67.681640625, 1.2800781726837, -44.029296875]],
      [[0.76673865318298, 0.0, 0.64195942878723], [0.0, 1.0, 0.0], [-0.64195942878723, 0.0, 0.76673865318298], [-65.9951171875, 1.3123047351837, -14.048828125]],
      [[0.70863229036331, 0.0, 0.70557802915573], [0.0, 1.0, 0.0], [-0.70557802915573, 0.0, 0.70863229036331], [-77.7158203125, 3.8396484851837, -40.0791015625]],
      [[-0.67082649469376, 0.0, -0.74161434173584], [0.0, 1.0, 0.0], [0.74161434173584, 0.0, -0.67082649469376], [-75.3818359375, 1.2781468629837, -48.33203125]],
      [[0.99999010562897, 0.0, 0.004452851600945], [0.0, 1.0, 0.0], [-0.004452851600945, 0.0, 0.99999010562897], [-47.5126953125, 6.4011716842651, -31.345703125]],
      [[-0.99984860420227, 0.0, 0.017400253564119], [0.0, 1.0, 0.0], [-0.017400253564119, 0.0, -0.99984860420227], [-44.69921875, 6.4001951217651, -22.798828125]],
      [[-0.94047498703003, 0.0, -0.33986288309097], [0.0, 1.0, 0.0], [0.33986288309097, 0.0, -0.94047498703003], [-35.6298828125, 6.4001951217651, -0.412109375]],
      [[0.95183783769608, 0.0, -0.30660197138786], [0.0, 1.0, 0.0], [0.30660197138786, 0.0, 0.95183783769608], [0.853515625, 6.4001951217651, -38.060546875]],
      [[0.17383693158627, 0.0, -0.98477447032928], [0.0, 1.0, 0.0], [0.98477447032928, 0.0, 0.17383693158627], [-41.392917633057, 6.4739294052124, -58.508415222168]],
      [[0.036329574882984, 0.0, 0.99933987855911], [0.0, 1.0, 0.0], [-0.99933987855911, 0.0, 0.036329574882984], [12.335939407349, 11.35235786438, -42.9638671875]],
      [[-0.73328685760498, 0.0, 0.67991936206818], [0.0, 1.0, 0.0], [-0.67991936206818, 0.0, -0.73328685760498], [41.783203125, 10.795729637146, -31.7529296875]],
      [[0.26905128359795, 0.0, 0.96312588453293], [0.0, 1.0, 0.0], [-0.96312588453293, 0.0, 0.26905128359795], [42.5888671875, 8.5916013717651, -5.4423828125]],
      [[0.018520444631577, 0.0, 0.99982845783234], [0.0, 1.0, 0.0], [-0.99982845783234, 0.0, 0.018520444631577], [-54.6044921875, 10.871887207031, -34.7685546875]]
    ]
};